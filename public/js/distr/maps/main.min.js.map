{"version":3,"sources":["main.js"],"names":["request","method","url","query","cb","xhttp","XMLHttpRequest","onreadystatechange","this","readyState","status","open","setRequestHeader","send","Auth","_this","authBt","document","getElementById","login","pass","onclick","value","alert","res","window","location","href","Authenticate","pass1","pass2","authenBt","style","borderColor","q","console","log","statusText","Performance","bd","getElementsByTagName","backgroundImage","backgroundRepeat","pointsData","leftSide","rightSide","totalPointsNum","addPerfBtn","searchInpt","backgroundModal","closeAddPerf","savePerfBtn","perfName","perfType","perfUrl","perfActs","perfPoints","perfNotes","addActBtn","searchResults","closeCardPerf","backgroundCard","addPointsBtn","addRightPointBtn","addLeftPointBtn","backgroundPoints","closePointsBtn","acceptPointsBtn","userPointsBack","closeUserPoints","perfImage","cardPerfName","cardPerfType","cardPerfActs","cardPerfPoints","cardPerfNotes","totalPointsSpan","oninput","innerHTML","test","results","JSON","parse","responseText","perfs","elem","display","i","length","createElement","setAttribute","textContent","name","ending","imgUrl","src","actsNum","acts","actLine","span1","span2","type","e","appendChild","points","childNodes","removeChild","totalUsrPoints","countPointsNum","btn","fillUserPointsModal","scrollTo","notes","admin","editBt","openEdit","rmBt","confirm","save","_id","parentElement","remove","performance","sp","ip","rm","add","addAct","target","em","nSp","openEditTable","fillPointsEditModal","sp1","bt1","leftTable","rightTable","trLeft","trRight","td2","td3","td4","numTotal","key1","inpt1","brSp","inpt2","stalls","split","inptMeters","meters","inptMach","machine","delsp","key2","totalNum","leftUsrTable","rightUsrTable","leftPoints","getElementsByClassName","rightPoints","b","line1","firstChild","line2","lastChild","backgroundColor","span","showBtn","addPoint","childNum","nextChildNum","spanAct","timeInpt","delBtn","insertBefore","checkActs","children","perfId","action","isEmpty","obj","prop","hasOwnProperty","stringify","includes","push","reload","perfData","side","tr","brSpan","td","inpt","delSp","SkedApp","init","$","change"],"mappings":"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","file":"../main.min.js","sourcesContent":["function request(method, url, query, cb) {\n  const xhttp = new XMLHttpRequest();\n  xhttp.onreadystatechange = function() {\n    if (this.readyState == 4 && this.status == 200) {\n      cb(\"success\", this);\n    } else if (this.readyState == 4 && this.status == 500) {\n      cb(\"error\", this);\n    }\n  };\n  xhttp.open(method, url, true);\n\n  if(query !== false) {\n    xhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    xhttp.send(query);\n  } else {\n    xhttp.send();\n  }\n}\nfunction Auth() {\n  const _this = this;\n  this.authBt = document.getElementById(\"auth-bt\");\n  this.login = document.getElementById(\"login\");\n  this.pass = document.getElementById(\"pass\");\n\n  this.authBt.onclick = function() {\n    let login = _this.login.value;\n    let pass = _this.pass.value;\n\n    if(!login || !pass) {\n      return alert(\"Отсутствует логин или пароль\");\n    }\n    request(\"POST\", \"/auth\", `login=${login}&pass=${pass}`, function(status, res) {\n      if(status == \"success\") {\n        alert(\"Авторизация успешна и будет действительна в течение 30 дней\");\n        return window.location.href = \"/\";\n      } else if(status == \"error\") {\n        alert(\"Ошибка авторизации, проверьте введённые Вами данные\");\n        return;\n      }\n    });\n  }\n}\nfunction Authenticate() {\n  const _this = this;\n\n  this.login = document.getElementById(\"login\");\n  this.pass1 = document.getElementById(\"pass1\");\n  this.pass2 = document.getElementById(\"pass2\");\n  this.authenBt = document.getElementById(\"authenticate-bt\");\n\n  this.login.onclick = function() {\n    _this.login.style.borderColor = \"initial\";\n  };\n  this.pass1.onclick = function() {\n    _this.pass1.style.borderColor = \"initial\";\n  };\n  this.pass2.onclick = function() {\n    _this.pass2.style.borderColor = \"initial\";\n  };\n  \n  this.authenBt.onclick = function() {\n    // check inputs \n    if(!_this.login.value) {\n      return _this.login.style.borderColor = \"red\";\n    } else if(!_this.pass1.value) {\n      return _this.pass1.style.borderColor = \"red\";\n    } else if(!_this.pass2.value) {\n      return _this.pass2.style.borderColor = \"red\";\n    }\n\n    let login = _this.login.value;\n    let pass1 = _this.pass1.value;\n    let pass2 = _this.pass2.value;\n    let q = `login=${login}&pass1=${pass1}&pass2=${pass2}`;\n\n    // check passes match\n    if(pass1 !== pass2) {\n      return alert(\"Введённые пароли не совпадают\");\n    }\n\n    request(\"POST\", \"/authenticate\", q, function(status, res) {\n      if(status == \"success\") {\n        alert(\"Аутентификация успешна, сейчас вы будете перенаправлены на страницу логина\");\n        return window.location.href = \"/auth\";\n      } else if(status == \"error\") {\n        console.log(res.statusText);\n        alert(\"Ошибка аутентификации, проверьте все поля\");\n        return;\n      }\n    });\n  };\n } \nfunction Performance() {\n  let bd = document.getElementsByTagName(\"body\");                                                     \n  bd[0].style.backgroundImage = \"url('/static/imgs/backgr-bsh.jpg')\";\n  bd[0].style.backgroundRepeat = \"no-repeat\";\n  const _this = this;\n  this.pointsData = {\n    leftSide: {},\n    rightSide: {}\n  };\n  this.totalPointsNum = 0;\n  this.addPerfBtn = document.getElementById(\"add-performance-btn\");\n\n  this.searchInpt = document.getElementById(\"search-perfs\");\n  this.backgroundModal = document.getElementById(\"background-modal\");\n  this.closeAddPerf = document.getElementById(\"close-adding-perf\");\n  this.savePerfBtn = document.getElementById(\"save-perf-btn\");\n  this.perfName = document.getElementById(\"perf-name\");\n  this.perfType = document.getElementById(\"perf-type\");\n  this.perfUrl = document.getElementById(\"perf-pic-url\");\n  this.perfActs = document.getElementById(\"perf-acts\");\n  this.perfPoints = document.getElementById(\"perf-points\");\n  this.perfNotes = document.getElementById(\"perf-notes\");\n  this.addActBtn = document.getElementById(\"add-act\");\n  this.searchResults = document.getElementById(\"search-results\");\n  this.closeCardPerf = document.getElementById(\"close-card-perf\");\n  this.backgroundCard = document.getElementById(\"card-back\");\n  this.addPointsBtn = document.getElementById(\"add-points\");\n  this.addRightPointBtn = document.getElementById(\"add-right-pt-btn\");\n  this.addLeftPointBtn = document.getElementById(\"add-left-pt-btn\");\n  this.backgroundPoints = document.getElementById(\"points-back\");\n  this.closePointsBtn = document.getElementById(\"close-points-perf\");\n  this.acceptPointsBtn = document.getElementById(\"accept-points-btn\");\n  this.userPointsBack = document.getElementById(\"user-points-back\");\n  this.closeUserPoints = document.getElementById(\"close-user-points\");\n  this.perfImage = document.getElementById(\"perf-img\");\n\n  this.cardPerfName = document.getElementById(\"card-perf-name\");\n  this.cardPerfType = document.getElementById(\"card-perf-type\");\n  this.cardPerfActs = document.getElementById(\"card-perf-acts\");\n  this.cardPerfPoints = document.getElementById(\"card-perf-points\");\n  this.cardPerfNotes = document.getElementById(\"card-perf-notes\");\n  \n  this.totalPointsSpan = document.getElementById(\"total-points-num\");\n\n  this.searchInpt.oninput = function() {\n    _this.searchResults.innerHTML = \"\";\n    const rgx = /^\\s*$/;\n\n    if(!rgx.test(_this.searchInpt.value)) {\n      let queryStr = `query=${_this.searchInpt.value}`;\n      // send query to Server\n      request(\"post\", \"/perf-search\", queryStr, function(status, res) {\n        if(status == \"success\") {\n          const results = JSON.parse(res.responseText).perfs;\n          _this.searchResults.style.display = \"block\";\n          let elem;\n          for(let i=0; i<results.length; i++) {\n            elem = document.createElement(\"div\");\n            elem.setAttribute(\"class\", \"perf-name-found\");\n            elem.textContent = results[i].name;\n\n            elem.onclick = function() {\n\n              _this.cardPerfName.textContent = results[i].name;\n\n              // show img if exists\n              if(results[i].imgUrl) {\n                _this.perfImage.src = \"/static/imgs/performance-imgs/\"+results[i].imgUrl;\n                _this.perfImage.style.display = \"block\";\n              } else {\n                _this.perfImage.src = \"\";\n                _this.perfImage.style.display = \"none\";\n              }\n\n              var ending;\n              let actsNum = results[i].acts.length;\n\n              if(actsNum == 1) {\n                ending = \"акт\";\n              } else if(actsNum > 1 && actsNum < 5 ) {\n                ending = \"акта\";\n              } else {\n                ending = \"актов\";\n              }\n\n              if(results[i].type == \"ballet\") {\n                _this.cardPerfType.textContent = `Балет, ${actsNum} ${ending}`;\n               } else if(results[i].type == \"opera\") {\n                _this.cardPerfType.textContent = `Опера, ${results[i].acts.length} ${ending}`;\n              }\n\n              // create elements for acts\n              _this.cardPerfActs.innerHTML = \"\";\n\n              var actLine, span1, span2;\n\n              for(let e=0; e<results[i].acts.length; e++) {\n                actLine = document.createElement(\"div\");\n                actLine.setAttribute(\"class\", \"act-line\");\n                span1 = document.createElement(\"span\");\n                span1.textContent = `${e+1} Акт:`;\n                span2 = document.createElement(\"span\");\n                span2.textContent = `${results[i].acts[e]}`;\n                actLine.appendChild(span1);\n                actLine.appendChild(span2);\n                _this.cardPerfActs.appendChild(actLine);\n              }\n              // fill points\n              if(results[i].points) {\n                if( _this.cardPerfPoints.childNodes.length == 2) {\n                  _this.cardPerfPoints.removeChild(_this.cardPerfPoints.childNodes[1]\n                    );\n                    let totalUsrPoints = document.createElement(\"p\");\n                    totalUsrPoints.setAttribute(\"class\", \"total-points-usr\");\n                    totalUsrPoints.textContent = \"Всего: \"+ _this.countPointsNum(results[i].points) + \" шт.\";\n    \n                    let btn = document.createElement(\"button\");\n                    btn.setAttribute(\"class\", \"showPoints-btn\");\n                    btn.onclick = function() {\n                      // fill with points\n                      _this.fillUserPointsModal(results[i].points);\n                      window.scrollTo(0, 0);\n                      _this.userPointsBack.style.display = \"block\";\n                    };\n                    btn.textContent = \"Просмотр\";\n                    _this.cardPerfPoints.appendChild(totalUsrPoints);\n                    if(_this.cardPerfPoints.childNodes.length != 3) {\n                      _this.cardPerfPoints.appendChild(btn);\n                    }   \n                }\n              } else {\n                _this.pointsData = {\n                  leftSide: {},\n                  rightSide: {}\n                }\n                if(_this.cardPerfPoints.childNodes.length == 3) {\n                  _this.cardPerfPoints.removeChild(_this.cardPerfPoints.childNodes[1]);\n                  _this.cardPerfPoints.removeChild(_this.cardPerfPoints.childNodes[1]);\n                  let i = document.createElement(\"i\");\n                  i.innerHTML = \"&ndash; Отсутствуют\"\n                  _this.cardPerfPoints.appendChild(i);\n                }\n              }\n\n              // fill notes\n              if(results[i].notes != \"\") {\n                _this.cardPerfNotes.textContent = results[i].notes;\n              }\n\n              if(admin === \"true\") {\n                // add edit performance button\n                let editBt = document.createElement(\"button\");\n                editBt.setAttribute(\"class\", \"edit-btn\");\n                editBt.textContent = \"Редактировать\";\n                editBt.onclick = function() {\n                  _this.openEdit(results[i]);\n                };\n                // add remove performance button\n                let rmBt = document.createElement(\"button\");\n                rmBt.setAttribute(\"class\", \"rm-perf-btn\");\n                rmBt.textContent = \"Удалить\";\n                rmBt.onclick = function() {\n                  if(confirm(`Вы действительно хотите удалить спектакль \"${results[i].name}\" из базы?`)) {\n                    _this.save(results[i]._id, \"remove\");\n                  }\n                };\n\n                // add edit and remove buttons if no ones\n                if(_this.cardPerfName.parentElement.childNodes.length == 5) {\n                  _this.cardPerfName.parentElement.appendChild(editBt);\n                  _this.cardPerfName.parentElement.appendChild(rmBt);\n                } else {\n                  _this.cardPerfName.parentElement.childNodes[5].remove();\n                  _this.cardPerfName.parentElement.childNodes[5].remove();\n                  _this.cardPerfName.parentElement.appendChild(editBt);\n                  _this.cardPerfName.parentElement.appendChild(rmBt);\n                }\n              }\n              _this.savePerfBtn.onclick = function() {\n                _this.save(results[i]._id, \"update\");\n              };\n              _this.backgroundCard.style.display = \"block\";\n            };\n\n            _this.searchResults.appendChild(elem);\n          }\n\n          // if nothing found\n          if (results.length == 0) {\n            elem = document.createElement(\"div\");\n            elem.setAttribute(\"class\", \"perf-name-found nothing-found\");\n            elem.textContent = \"Ничего не найдено\";\n            _this.searchResults.appendChild(elem);\n          }\n        }\n        else if(status == \"err\") {\n          return;\n        }\n      });\n    }\n  };\n\n  this.openEdit = function(performance) {\n\n    _this.backgroundCard.style.display = \"none\";\n    _this.backgroundModal.style.display = \"block\";\n\n    this.perfName.value = performance.name;\n    this.perfType.value = performance.type;\n    this.perfUrl.value = performance.imgUrl;\n    \n    // fill editing window with acts\n   \n    if(performance.acts.length > 0) {\n      this.perfActs.innerHTML = \"\";\n\n      let actLine, sp, ip, rm, add;\n      for(let i=0; i<performance.acts.length; i++) {\n        actLine = document.createElement(\"actLine\");\n        actLine.setAttribute(\"class\", \"act-line\");\n\n        sp = document.createElement(\"span\");\n        sp.setAttribute(\"class\", \"perf-act\");\n        sp.textContent = (i+1)+\":\";\n        actLine.appendChild(sp);\n        ip = document.createElement(\"input\");\n        ip.setAttribute(\"class\", \"act-time\");\n        ip.setAttribute(\"type\", \"text\");\n        ip.setAttribute(\"placeholder\", \"1ч 15мин\");\n        ip.value = performance.acts[i];\n        actLine.appendChild(ip);\n        if(i==0) {\n          add = document.createElement(\"button\");\n          add.setAttribute(\"class\", \"add-mini-btn\");\n          add.textContent = \"+\";\n          add.onclick = function() {\n            _this.addAct();\n          };\n          actLine.appendChild(add);\n        } else {\n          rm = document.createElement(\"span\");\n          rm.setAttribute(\"class\", \"del-act-btn\");\n          rm.textContent = \"X\";\n          rm.onclick = function(e) {\n            e.target.parentElement.remove();\n          };\n          actLine.appendChild(rm);\n        }\n        em = document.createElement(\"button\");\n        sp.setAttribute(\"class\", \"perf-act\");\n        this.perfActs.appendChild(actLine);\n      }\n      \n    }\n\n    // fill editing table with points\n    if(performance.points) {\n      // fill preview modal\n      _this.perfPoints.childNodes[0].remove();\n      _this.perfPoints.childNodes[0].remove();\n      let nSp = document.createElement(\"span\");\n      nSp.setAttribute(\"class\", \"points-number\");\n      nSp.textContent = _this.countPointsNum(performance.points) + \" шт.\";\n      let openEditTable = document.createElement(\"span\");\n      openEditTable.setAttribute(\"class\", \"showPoints-btn\");\n      openEditTable.textContent = \"Редактировать\";\n      openEditTable.onclick = function() {\n        _this.fillPointsEditModal(performance.points);\n        _this.backgroundPoints.style.display = \"block\";\n      }\n      _this.perfPoints.appendChild(nSp);\n      _this.perfPoints.appendChild(openEditTable);\n\n    }  else {\n      _this.perfPoints.childNodes[0].remove();\n      _this.perfPoints.childNodes[0].remove();\n      let sp1, bt1;\n      sp1 = document.createElement(\"span\");\n      sp1.textContent = \"- Нет\";\n      sp1.setAttribute(\"class\", \"no-points\");\n      bt1 = document.createElement(\"button\");\n      bt1.setAttribute(\"class\", \"add-mini-btn\");\n      bt1.textContent = \"+\";\n      bt1.onclick = function() {\n        // clear before \n        let leftTable = document.getElementById(\"left-table\");\n        let rightTable = document.getElementById(\"right-table\");\n\n        while(leftTable.childNodes.length != 1) {\n          leftTable.childNodes[leftTable.childNodes.length-1].remove();\n        }\n        while(rightTable.childNodes.length != 1) {\n          rightTable.childNodes[rightTable.childNodes.length-1].remove();\n        }\n        _this.totalPointsNum = 0;\n        let numTotal = document.getElementById(\"total-points-num\");\n        numTotal.textContent = \"0 шт.\";\n\n        _this.backgroundPoints.style.display = \"block\";\n      };\n      _this.perfPoints.appendChild(sp1);\n      _this.perfPoints.appendChild(bt1);\n    }\n    \n    this.perfNotes.value = performance.notes;\n  };\n\n  this.fillPointsEditModal = function(points) {\n    let leftTable = document.getElementById(\"left-table\");\n    let rightTable = document.getElementById(\"right-table\");\n    \n    // clear before filling\n    while(leftTable.childNodes.length != 1) {\n      leftTable.childNodes[leftTable.childNodes.length-1].remove();\n    }\n    while(rightTable.childNodes.length != 1) {\n      rightTable.childNodes[rightTable.childNodes.length-1].remove();\n    }\n\n    _this.totalPointsNum = _this.countPointsNum(points);\n\n    let numTotal = document.getElementById(\"total-points-num\");\n    numTotal.textContent = _this.countPointsNum(points) + \" шт.\";\n\n    let trLeft, trRight, td2, td3, td4;\n    for(key1 in points.leftSide) {\n      trLeft = document.createElement(\"tr\");\n      trLeft.setAttribute(\"class\", \"left-point-rope\");\n      trLeft.appendChild(document.createElement(\"td\"));\n\n      td2 = document.createElement(\"td\");\n      td3 = document.createElement(\"td\");\n      td4 = document.createElement(\"td\");\n\n      // fill them with inputs\n      let inpt1, brSp, inpt2;\n      inpt1 = document.createElement(\"input\");\n      inpt1.setAttribute(\"type\", \"number\");\n      inpt1.setAttribute(\"class\", \"lines\");\n      inpt1.value = points.leftSide[key1].stalls.split('/')[0];\n      brSp = document.createElement(\"span\");\n      brSp.textContent = \"/\";\n      inpt2 = document.createElement(\"input\");\n      inpt2.setAttribute(\"type\", \"number\");\n      inpt2.setAttribute(\"class\", \"lines\");\n      inpt2.value = points.leftSide[key1].stalls.split('/')[1];\n      td2.appendChild(inpt1);\n      td2.appendChild(brSp);\n      td2.appendChild(inpt2);\n\n      let inptMeters = document.createElement(\"input\");\n      inptMeters.setAttribute(\"type\", \"number\");\n      inptMeters.setAttribute(\"class\", \"meters\");\n      inptMeters.value = points.leftSide[key1].meters;\n      td3.appendChild(inptMeters);\n\n      let inptMach = document.createElement(\"input\");\n      inptMach.setAttribute(\"type\", \"number\");\n      inptMach.setAttribute(\"class\", \"machine\");\n      inptMach.value = points.leftSide[key1].machine;\n      td4.appendChild(inptMach);\n      let delsp = document.createElement(\"span\");\n      delsp.setAttribute(\"class\", \"del-point-rope\");\n      delsp.textContent = \"X\";\n      delsp.onclick = function(e) {\n        e.target.parentElement.parentElement.remove();\n      };\n      td4.appendChild(delsp);\n\n      trLeft.appendChild(td2);\n      trLeft.appendChild(td3);\n      trLeft.appendChild(td4);\n      leftTable.appendChild(trLeft);\n    }\n\n    for(key2 in points.rightSide) { \n      trRight = document.createElement(\"tr\");\n      trRight.setAttribute(\"class\", \"right-point-rope\");\n      trRight.appendChild(document.createElement(\"td\"));\n      td2 = document.createElement(\"td\");\n      td3 = document.createElement(\"td\");\n      td4 = document.createElement(\"td\");\n\n      // fill them with inputs\n      let inpt1, brSp, inpt2;\n      inpt1 = document.createElement(\"input\");\n      inpt1.setAttribute(\"type\", \"number\");\n      inpt1.setAttribute(\"class\", \"lines\");\n      inpt1.value = points.rightSide[key2].stalls.split('/')[0];\n      brSp = document.createElement(\"span\");\n      brSp.textContent = \"/\";\n      inpt2 = document.createElement(\"input\");\n      inpt2.setAttribute(\"type\", \"number\");\n      inpt2.setAttribute(\"class\", \"lines\");\n      inpt2.value = points.rightSide[key2].stalls.split('/')[1];\n      td2.appendChild(inpt1);\n      td2.appendChild(brSp);\n      td2.appendChild(inpt2);\n\n      let inptMeters = document.createElement(\"input\");\n      inptMeters.setAttribute(\"type\", \"number\");\n      inptMeters.setAttribute(\"class\", \"meters\");\n      inptMeters.value = points.rightSide[key2].meters;\n      td3.appendChild(inptMeters);\n\n      let inptMach = document.createElement(\"input\");\n      inptMach.setAttribute(\"type\", \"number\");\n      inptMach.setAttribute(\"class\", \"machine\");\n      inptMach.value = points.rightSide[key2].machine;\n      td4.appendChild(inptMach);\n      let delsp = document.createElement(\"span\");\n      delsp.setAttribute(\"class\", \"del-point-rope\");\n      delsp.textContent = \"X\";\n      delsp.onclick = function(e) {\n        e.target.parentElement.parentElement.remove();\n      };\n      td4.appendChild(delsp);\n      trRight.appendChild(td2);\n      trRight.appendChild(td3);\n      trRight.appendChild(td4);\n      rightTable.appendChild(trRight);\n    }\n  };\n\n  this.countPointsNum = function(points) {\n    let totalNum = 0; \n    for(key1 in points.leftSide) {\n      totalNum++;\n    }\n    for(key1 in points.rightSide) {\n      totalNum++;\n    }\n    return totalNum;\n  };\n\n \n  this.fillUserPointsModal = function(points) {\n    let leftUsrTable = document.getElementById(\"left-usr-table\");\n    let rightUsrTable = document.getElementById(\"right-usr-table\");\n    let numTotal = document.getElementById(\"total-user-points\");\n    numTotal.textContent = _this.countPointsNum(points) + \" шт.\";\n\n    let trLeft, trRight, td2, td3, td4;\n    for(key1 in points.leftSide) {\n      trLeft = document.createElement(\"tr\");\n      trLeft.appendChild(document.createElement(\"td\"));\n\n      td2 = document.createElement(\"td\");\n      td3 = document.createElement(\"td\");\n      td4 = document.createElement(\"td\");\n\n      td2.textContent = points.leftSide[key1].stalls; \n      trLeft.appendChild(td2);\n      td3.textContent = points.leftSide[key1].meters;\n      trLeft.appendChild(td3);\n      td4.textContent = points.leftSide[key1].machine;\n      trLeft.appendChild(td4);\n      leftUsrTable.appendChild(trLeft);\n    }\n\n    for(key2 in points.rightSide) { \n      trRight = document.createElement(\"tr\");\n      trRight.appendChild(document.createElement(\"td\"));\n      td2 = document.createElement(\"td\");\n      td3 = document.createElement(\"td\");\n      td4 = document.createElement(\"td\");\n      \n      td2.textContent = points.rightSide[key2].stalls;\n      trRight.appendChild(td2);\n      td3.textContent = points.rightSide[key2].meters;\n      trRight.appendChild(td3);\n      td4.textContent = points.rightSide[key2].machine;\n      trRight.appendChild(td4);\n      rightUsrTable.appendChild(trRight);\n    }\n  };\n\n\n  this.closeUserPoints.onclick = function() {\n    _this.userPointsBack.style.display = \"none\";\n  };\n\n  this.acceptPointsBtn.onclick = function() {\n    // save points\n    let leftPoints = document.getElementsByClassName(\"left-point-rope\");\n    let rightPoints = document.getElementsByClassName(\"right-point-rope\");\n\n    if(leftPoints.length == 0 && rightPoints.length == 0) {\n      _this.pointsData = {};\n      _this.backgroundPoints.style.display = \"none\";\n      return;\n    }\n\n    for(let i=0; i<leftPoints.length; i++) {\n      _this.pointsData.leftSide[\"point\"+(i+1)] = {};\n      for(let b=1; b<leftPoints[i].childNodes.length; b++) {\n        if(b==1) {\n          let line1 = leftPoints[i].childNodes[b].firstChild;\n          let line2 = leftPoints[i].childNodes[b].lastChild;\n           // check if not empty\n           if(!line1.value) {\n            alert(\"Пустые ячейки недопустимы\");\n            line1.parentElement.style.backgroundColor = \"#ff6d6d\";\n            line1.onclick = function() {\n              line1.parentElement.style.backgroundColor = \"initial\";\n            }\n            return;\n           } else if(!line2.value) {\n            alert(\"Пустые ячейки недопустимы\");\n            line2.parentElement.style.backgroundColor = \"#ff6d6d\";\n            line2.onclick = function() {\n              line2.parentElement.style.backgroundColor = \"initial\";\n            };\n           }\n          _this.pointsData.leftSide[\"point\"+(i+1)].stalls = line1.value+\"/\"+line2.value;\n        } else if (b==2) {\n          // check if empty\n          if(!leftPoints[i].childNodes[b].firstChild.value) {\n            alert(\"Пустые ячейки недопустимы\");\n            leftPoints[i].childNodes[b].firstChild.parentElement.style.backgroundColor = \"#ff6d6d\";\n            leftPoints[i].childNodes[b].firstChild.onclick = function() {\n              leftPoints[i].childNodes[b].firstChild.parentElement.style.backgroundColor = \"initial\";\n            }\n            return;\n          }\n          _this.pointsData.leftSide[\"point\"+(i+1)].meters = leftPoints[i].childNodes[b].firstChild.value;\n        } else if (b==3) {\n          _this.pointsData.leftSide[\"point\"+(i+1)].machine = leftPoints[i].childNodes[b].firstChild.value;\n        }\n      }\n    }\n    for(let i=0; i<rightPoints.length; i++) {\n      _this.pointsData.rightSide[\"point\"+(i+1)] = {};\n      for(let b=1; b<rightPoints[i].childNodes.length; b++) {\n        if(b==1) {\n          let line1 = rightPoints[i].childNodes[b].firstChild;\n          let line2 = rightPoints[i].childNodes[b].lastChild;\n           // check if not empty\n           if(!line1.value) {\n            alert(\"Пустые ячейки недопустимы\");\n            line1.parentElement.style.backgroundColor = \"#ff6d6d\";\n            line1.onclick = function() {\n              line1.parentElement.style.backgroundColor = \"initial\";\n            }\n            return;\n           } else if(!line2.value) {\n            alert(\"Пустые ячейки недопустимы\");\n            line2.parentElement.style.backgroundColor = \"#ff6d6d\";\n            line2.onclick = function() {\n              line2.parentElement.style.backgroundColor = \"initial\";\n            };\n            return;\n           }\n          _this.pointsData.rightSide[\"point\"+(i+1)].stalls = line1.value+\"/\"+line2.value;\n        } else if (b==2) {\n          // check if empty\n          if(!rightPoints[i].childNodes[b].firstChild.value) {\n            alert(\"Пустые ячейки недопустимы\");\n            rightPoints[i].childNodes[b].firstChild.parentElement.style.backgroundColor = \"#ff6d6d\";\n            rightPoints[i].childNodes[b].firstChild.onclick = function() {\n              rightPoints[i].childNodes[b].firstChild.parentElement.style.backgroundColor = \"initial\";\n            }\n            return;\n          }\n          _this.pointsData.rightSide[\"point\"+(i+1)].meters = rightPoints[i].childNodes[b].firstChild.value;\n        } else if (b==3) {\n          _this.pointsData.rightSide[\"point\"+(i+1)].machine = rightPoints[i].childNodes[b].firstChild.value;\n        }\n      }\n    }\n    // show on modal\n    _this.perfPoints.childNodes[_this.perfPoints.childNodes.length-1].remove();\n    _this.perfPoints.childNodes[_this.perfPoints.childNodes.length-1].remove();\n\n    let span = document.createElement(\"span\");\n    span.setAttribute(\"class\", \"points-number\");\n    span.textContent = _this.totalPointsNum+\" шт. \"\n    let showBtn = document.createElement(\"span\");\n    showBtn.setAttribute(\"class\", \"showPoints-btn\");\n    showBtn.setAttribute(\"id\", \"showPoints-btn\");\n    showBtn.onclick = function() {_this.backgroundPoints.style.display = \"block\"};\n    showBtn.textContent = \"Просмотр\";\n    _this.perfPoints.appendChild(span);\n    _this.perfPoints.appendChild(showBtn);\n    _this.backgroundPoints.style.display = \"none\";\n  };\n\n  this.closePointsBtn.onclick = function() {\n    alert('Чтобы сохранить изменения, нажмите \"подтвердить\", после чего нажмите \"сохранить\", иначе внесенные изменения будут проигнорированы.') \n      return _this.backgroundPoints.style.display = \"none\";\n    // }\n  };\n\n  this.addPointsBtn.onclick = function() {\n    _this.backgroundPoints.style.display = \"block\";\n  };\n\n  this.closeCardPerf.onclick = function() {\n    _this.savePerfBtn.onclick = function() {\n      _this.save(false, \"create\");\n    };\n\n    _this.backgroundCard.style.display = \"none\";\n  };\n\n  if(admin === \"true\") {\n    this.addPerfBtn.onclick = function() {\n      _this.backgroundModal.style.display = \"block\";\n    };\n  }\n\n  this.closeAddPerf.onclick = function() {\n    _this.backgroundModal.style.display = \"none\";\n  };\n\n  this.savePerfBtn.onclick = function() {\n    _this.save(false, \"create\");\n  };\n\n  this.perfName.onclick = function() {\n    _this.perfName.style.borderColor = \"initial\";\n  };\n\n  this.perfType.onclick = function() {\n    _this.perfType.style.borderColor = \"initial\";\n  }\n\n  this.addActBtn.onclick = function() {\n    _this.addAct();\n  };\n\n  this.addRightPointBtn.onclick = function() {\n    _this.addPoint(\"right\");\n  }\n\n  this.addLeftPointBtn.onclick = function() {\n    _this.addPoint(\"left\");\n  }\n\n  this.addAct = function() {\n    // num of childnodes without button\n    let childNum = _this.perfActs.childNodes.length;\n    let nextChildNum = childNum+1;\n   \n    // create elements\n    let actLine = document.createElement(\"div\");\n    let spanAct = document.createElement(\"span\");\n    let timeInpt = document.createElement(\"input\");\n    let delBtn = document.createElement(\"span\");\n\n    \n    // set attributes on them\n    actLine.setAttribute(\"class\", \"act-line\")\n    spanAct.setAttribute(\"class\", \"perf-act\");\n    spanAct.setAttribute(\"id\", \"perf-act\"+nextChildNum);\n    spanAct.textContent = nextChildNum +\":\";\n    timeInpt.setAttribute(\"type\", \"text\");\n    timeInpt.setAttribute(\"class\", \"act-time\");\n    timeInpt.setAttribute(\"id\", \"act-time\"+nextChildNum);\n    timeInpt.setAttribute(\"placeholder\", \"1ч 15мин\");\n    delBtn.setAttribute(\"id\", \"del-act-btn\"+nextChildNum);\n    delBtn.setAttribute(\"class\", \"del-act-btn\");\n    delBtn.textContent = \"X\";\n    delBtn.onclick = function() {\n      delBtn.parentElement.remove();\n    };\n\n    // add\n    actLine.appendChild(spanAct);\n    actLine.appendChild(timeInpt);\n    actLine.appendChild(delBtn);\n    _this.perfActs.insertBefore(actLine, _this.perfActs.childNodes[childNum]);\n  };\n\n  this.checkActs = function() {\n    // num of childnodes\n    let childNum = _this.perfActs.childNodes.length;\n    let children = _this.perfActs.childNodes;\n    for(let i=0; i<childNum; i++) {\n      \n      // check if act time exists for all children\n      if(!children[i].childNodes[1].value) {\n        children[i].childNodes[1].style.borderColor = \"red\";\n        children[i].childNodes[1].onclick = function() {return children[i].childNodes[1].style.borderColor = \"initial\";};\n        return false;\n        break;\n      }\n    }\n    return true;\n  };\n\n  this.save = function(perfId, action) {\n\n    if(action !== \"remove\") {\n       // check all inputs\n      if(!_this.perfName.value) {\n        return _this.perfName.style.borderColor = \"red\";\n      } \n      else if (!_this.perfType.value) {\n        return _this.perfType.style.borderColor = \"red\";\n      } \n      else if(!_this.checkActs()) {\n        return _this.perfActs.borderColor = \"red\";\n      } \n      else {\n        let name = _this.perfName.value;\n        let type = _this.perfType.value;\n        let imgUrl = _this.perfUrl.value;\n        let perfActs = [];\n        let perfNotes = _this.perfNotes.value;\n\n        function isEmpty(obj) {\n          for(var prop in obj) {\n            if(obj.hasOwnProperty(prop)) {\n              return false;\n            }\n          }\n        \n          return JSON.stringify(obj) === JSON.stringify({});\n        }\n\n        if(isEmpty(_this.pointsData.leftSide) && isEmpty(_this.pointsData.rightSide)) {\n          _this.pointsData = {};\n        }\n        \n        // check if acts do not include commas\n        for(let i=0; i<_this.perfActs.childNodes.length; i++) {\n          if(_this.perfActs.childNodes[i].childNodes[1].value.includes(\",\")) {\n            _this.perfActs.childNodes[i].childNodes[1].style.borderColor = \"red\";\n            return;\n          }\n          perfActs.push(_this.perfActs.childNodes[i].childNodes[1].value);\n        }\n  \n        if(perfId && action === \"update\") {\n          let perfData = `name=${name}&type=${type}&imgUrl=${imgUrl}&acts=${perfActs}&points=${JSON.stringify(_this.pointsData)}&notes=${perfNotes}&perfId=${perfId}&action=${action}`;\n  \n          // send data to Server\n          request(\"post\", \"/performances\", perfData, function(status, res) {\n            if(status == \"success\") {\n              alert(\"Удачно обновлено\");\n              _this.backgroundModal.style.display = \"none\";\n              window.location.reload();\n            }\n            else if(status == \"err\") {\n              return;\n            }\n          });\n        } else if(!perfId && action== \"create\") { \n          perfData = `name=${name}&type=${type}&imgUrl=${imgUrl}&acts=${perfActs}&points=${JSON.stringify(_this.pointsData)}&notes=${perfNotes}&action=${action}`;\n          // send data to Server\n          request(\"post\", \"/performances\", perfData, function(status, res) {\n            if(status == \"success\") {\n              alert(\"Удачно создано\");\n              _this.backgroundModal.style.display = \"none\";\n              window.location.reload();\n            }\n            else if(status == \"err\") {\n              return;\n            }\n          });\n        }\n      }\n    } else {\n      perfData = `perfId=${perfId}&action=${action}`;\n      // send data to Server\n      request(\"post\", \"/performances\", perfData, function(status, res) {\n        if(status == \"success\") {\n          alert(\"Успешно удалено\");\n          _this.backgroundModal.style.display = \"none\";\n          window.location.reload();\n        }\n        else if(status == \"err\") {\n          return;\n        }\n      });\n    }\n  };\n\n  this.addPoint = function(side) {\n    let tr = document.createElement(\"tr\");\n    let brSpan = document.createElement(\"span\");\n    brSpan.textContent = \"/\";\n\n    for(let i=0; i<4; i++) {\n      let td = document.createElement(\"td\");\n      if(i == 1) {\n        for(let b=0; b<2; b++) {\n          let inpt = document.createElement(\"input\");\n          inpt.setAttribute(\"type\", \"number\");\n          inpt.setAttribute(\"class\", \"lines\");\n          (b == 1 ? td.appendChild(brSpan):null);\n          td.appendChild(inpt);\n        }\n      } else if(i == 2) {\n        let inpt = document.createElement(\"input\");\n        inpt.setAttribute(\"type\", \"number\");\n        inpt.setAttribute(\"class\", \"meters\");\n        td.appendChild(inpt);\n      } else if(i == 3) {\n        let inpt = document.createElement(\"input\");\n        let delSp = document.createElement(\"span\");\n        delSp.textContent = \"X\";\n        delSp.setAttribute(\"class\", \"del-point-rope\");\n        delSp.onclick = function(e) {\n          if(confirm(\"Удалить эту точку подвеса?\")) {\n            e.target.parentElement.parentElement.remove();\n            _this.totalPointsNum--;\n            _this.totalPointsSpan.textContent = _this.totalPointsNum +\" шт.\";\n          }\n        };\n        inpt.setAttribute(\"type\", \"number\");\n        inpt.setAttribute(\"class\", \"machine\");\n        td.appendChild(inpt);\n        td.appendChild(delSp);\n      }\n      tr.appendChild(td);\n    }\n    // add\n    tr.setAttribute(\"class\", side+\"-point-rope\");\n    document.getElementById(side+\"-table\").appendChild(tr);\n\n    // increment total points\n    _this.totalPointsNum++;\n    _this.totalPointsSpan.textContent = _this.totalPointsNum + \" шт.\";\n  }; \n}\nfunction SkedApp() {\n  this.init = function() {\n    // add evt listeners on all elements\n    $(\".shift-choose\").change(function(e) {\n      console.log(e);\n    });\n  };\n};"]}